import{_ as Ge,o as je,u as Ke,a as Xe,g as Ze,c as pe,r as c,z as He,Z as Je,B as i,C as Qe,d as o,e as f,f as t,w as e,j as a,l as j,k as g,i as m,q as We,p as D,m as r,t as u,F as z,v as K,n as y,s as Ye,X as et,y as C,A as tt}from"./index-iCREqSRD.js";import{s as w}from"./index-BKIM-Nyb.js";import{e as ve}from"./index-CFpzy-Yd.js";import lt from"./modInfo-_f9ZWqk2.js";const at={class:"page-div"},nt={class:"item-container"},ot={class:"card-footer",style:{"margin-top":"20px"}},dt={class:"card-header"},st={key:0,style:{display:"flex"}},it={style:{display:"flex","margin-left":"5px","flex-direction":"column","justify-content":"center"}},ut={key:1,style:{display:"flex"}},rt={style:{display:"flex","margin-left":"5px","flex-direction":"column","justify-content":"center"}},ct={class:"card-header"},gt={key:1},mt={key:0,class:"tip custom-block"},ft={key:1,class:"tip custom-block"},pt=et({name:"settingsMod"}),vt=Object.assign(pt,{setup(_t){je(async()=>{await F(),await B(),Ue()});const{t:d}=Ke(),{isMobile:b}=Xe(),de=Ze(),_e=pe(()=>de.isDark),se=pe(()=>de.language),ie=c("Download"),he=(n,s)=>{n.paneName==="Add"&&N(),n.paneName==="Setting"&&B()},_=c([]),X=c(!1),B=()=>{X.value=!0,p.value=0,U.value="",w.mod.settingFormat.get().then(n=>{_.value=n.data;for(let s of _.value)s.id===1&&(E.value=!0)}).finally(()=>{X.value=!1})},p=c(0),U=c(""),O=(n,s)=>{p.value=n,U.value=s,ye()},V=c(!1),$=c({id:"",configOptions:[]}),ye=()=>{V.value=!0,w.mod.configOptions.get({id:p.value}).then(n=>{$.value=n.data}).finally(()=>{V.value=!1})},be=()=>{V.value=!0,w.mod.configChange.post({modFormattedData:_.value}).then(n=>{C(n.message)}).finally(()=>{V.value=!1})},Z=c(!1),A=c({total:0,rows:[]}),we=c(),v=c({page:1,pageSize:30,searchText:"",searchType:"text"}),F=(n=!0)=>{n&&(v.value.page=1),Z.value=!0,ve.modSearch.get(v.value).then(s=>{A.value.rows=s.data.rows,A.value.total=s.data.total,v.value.searchType==="id"&&He(se.value==="zh"?"ID搜索不显示评分":"Search by ID will not display the vote data")}).finally(()=>{Z.value=!1})},ke=n=>{F(!1)},Ce=n=>{F(!1)},ue=c([]),H=c(!1),N=()=>{H.value=!0,ve.modInfoDownloaded.get().then(n=>{ue.value=n.data}).finally(()=>{H.value=!1})},J=c(!1),xe=()=>{J.value=!0,w.mod.sync.post().then(n=>{C(n.message),N()}).finally(()=>{J.value=!1})},I=c(!1),Se=n=>{let s=n.cmd,h=n.row;switch(I.value=!0,s){case"enable":Me(h);break;case"delete":De(h);break;default:I.value=!1,tt("error")}},Me=n=>{const h={isUgc:n.file_url==="",id:n.id};w.mod.enable.post(h).then(S=>{C(S.message)}).finally(()=>{I.value=!1})},De=n=>{const h={isUgc:n.file_url==="",id:n.id};w.mod.delete.post(h).then(S=>{C(S.message),N()}).finally(()=>{I.value=!1})},T=c(!1),ze=()=>{if(p.value===1)T.value=!0,w.mod.deleteClintModsDisabled.post().then(n=>{C(n.message),B(),E.value=!1}).finally(()=>{T.value=!1});else{T.value=!0;const s={isUgc:U.value==="",id:p.value};w.mod.disable.post(s).then(h=>{C(h.message),B()}).finally(()=>{T.value=!1})}},Q=c(""),Ue=()=>{Je.osInfo.get().then(n=>{Q.value=n.data.Platform})},W=c(!1),Ve=()=>{W.value=!0,w.mod.macosExport.post().then(n=>{C(n.message)}).finally(()=>{W.value=!1})},Y=c(!1),Fe=()=>{Y.value=!0;const n={isUgc:U.value==="",id:p.value,fileURL:U.value};w.mod.update.post(n).then(s=>{C(s.message)}).finally(()=>{Y.value=!1})},Ie=new URL("data:image/svg+xml,%3csvg%20t='1740385485405'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='25932'%20width='200'%20height='200'%3e%3cpath%20d='M512%20938.666667C276.352%20938.666667%2085.333333%20747.648%2085.333333%20512S276.352%2085.333333%20512%2085.333333s426.666667%20191.018667%20426.666667%20426.666667-191.018667%20426.666667-426.666667%20426.666667z%20m208.682667-575.018667a257.706667%20257.706667%200%200%200-60.330667-60.330667l-357.034667%20357.034667a257.706667%20257.706667%200%200%200%2060.330667%2060.330667l357.034667-357.034667z'%20p-id='25933'%3e%3c/path%3e%3c/svg%3e",import.meta.url).href;c(!1);const E=c(!1),ee=c(!1),Te=()=>{ee.value=!0,w.mod.addClintModsDisabled.post().then(n=>{C(n.message)}).finally(()=>{ee.value=!1,E.value=!0})};return(n,s)=>{const h=i("el-option"),S=i("el-select"),k=i("el-button"),Le=i("el-input"),P=i("el-form-item"),re=i("el-form"),te=i("el-scrollbar"),Re=i("el-pagination"),q=i("el-card"),le=i("el-tab-pane"),ce=i("el-tooltip"),Be=i("el-alert"),L=i("el-table-column"),ae=i("el-text"),Oe=i("arrow-down"),$e=i("el-icon"),ge=i("el-dropdown-item"),Ae=i("el-dropdown-menu"),Ne=i("el-dropdown"),Ee=i("el-table"),ne=i("el-col"),me=i("el-row"),fe=i("el-image"),M=i("el-tag"),Pe=i("el-divider"),oe=i("el-result"),qe=i("el-tabs"),G=Qe("loading");return o(),f("div",at,[t(qe,{modelValue:ie.value,"onUpdate:modelValue":s[6]||(s[6]=l=>ie.value=l),onTabClick:he},{default:e(()=>[t(le,{label:a(d)("setting.mod.tab.download"),name:"Download"},{default:e(()=>[j((o(),g(q,{shadow:"never",style:{height:"78vh"}},{default:e(()=>[m("div",null,[t(re,{ref_key:"modSearchFormRef",ref:we,inline:!0,model:v.value,onKeyup:We(F,["enter"])},{default:e(()=>[t(P,null,{default:e(()=>[t(Le,{modelValue:v.value.searchText,"onUpdate:modelValue":s[1]||(s[1]=l=>v.value.searchText=l),style:D(a(b)?"width: 75vw;":"width: 50vw;")},{prepend:e(()=>[t(S,{modelValue:v.value.searchType,"onUpdate:modelValue":s[0]||(s[0]=l=>v.value.searchType=l),style:{width:"85px"}},{default:e(()=>[t(h,{label:n.$t("setting.mod.download.searchTypeText"),value:"text"},null,8,["label"]),t(h,{label:n.$t("setting.mod.download.searchTypeId"),value:"id"},null,8,["label"])]),_:1},8,["modelValue"])]),append:e(()=>[t(k,{type:"primary",onClick:F},{default:e(()=>[r(u(a(d)("setting.mod.download.search")),1)]),_:1})]),_:1},8,["modelValue","style"])]),_:1})]),_:1},8,["model"])]),m("div",null,[t(te,{"max-height":"60vh"},{default:e(()=>[m("div",nt,[(o(!0),f(z,null,K(A.value.rows,l=>(o(),g(lt,{mod:l},null,8,["mod"]))),256))])]),_:1})]),m("div",ot,[t(Re,{"current-page":v.value.page,"onUpdate:currentPage":s[2]||(s[2]=l=>v.value.page=l),"page-size":v.value.pageSize,"onUpdate:pageSize":s[3]||(s[3]=l=>v.value.pageSize=l),"page-sizes":[10,20,30,40,50,100],total:A.value.total,layout:"total, sizes, prev, pager, next",onSizeChange:s[4]||(s[4]=l=>ke(v.value.pageSize)),onCurrentChange:s[5]||(s[5]=l=>Ce(v.value.page))},null,8,["current-page","page-size","total"])])]),_:1})),[[G,Z.value]])]),_:1},8,["label"]),t(le,{label:a(d)("setting.mod.tab.add"),name:"Add"},{default:e(()=>[t(me,{gutter:10},{default:e(()=>[t(ne,{span:24},{default:e(()=>[j((o(),g(q,{shadow:"never",style:{height:"75vh"}},{header:e(()=>[m("div",dt,[m("span",null,u(a(d)("setting.mod.add.header.title")),1),m("div",null,[t(k,{onClick:N},{default:e(()=>[r(u(a(d)("setting.mod.add.header.refresh")),1)]),_:1}),t(ce,{content:a(d)("setting.mod.add.header.syncTooltip"),"show-after":500,effect:"light",placement:"top"},{default:e(()=>[t(k,{loading:J.value,type:"primary",onClick:xe},{default:e(()=>[r(u(a(d)("setting.mod.add.header.sync")),1)]),_:1},8,["loading"])]),_:1},8,["content"]),t(k,{loading:ee.value,type:"danger",disabled:E.value,onClick:Te},{default:e(()=>[r(u(a(d)("setting.mod.add.header.addClientDisabled")),1)]),_:1},8,["loading","disabled"]),Q.value==="darwin"?(o(),g(k,{key:0,loading:W.value,type:"success",onClick:Ve},{default:e(()=>[r(u(a(d)("setting.mod.add.header.export")),1)]),_:1},8,["loading"])):y("",!0)])])]),default:e(()=>[t(Be,{closable:!1,effect:_e.value?"light":"dark",type:"warning"},{default:e(()=>[r(u(a(d)("setting.mod.add.alert")),1)]),_:1},8,["effect"]),t(Ee,{data:ue.value,border:"",style:{height:"51vh","margin-top":"10px"}},{default:e(()=>[t(L,{label:a(d)("setting.mod.add.table.name"),prop:"name"},null,8,["label"]),t(L,{label:"ID",prop:"id"}),t(L,{label:a(d)("setting.mod.add.table.size")},{default:e(l=>[r(u(a(Ye)(l.row.size)),1)]),_:1},8,["label"]),t(L,{label:a(d)("setting.mod.add.table.downloadedReady.title")},{default:e(l=>[l.row.downloadedReady?(o(),g(ae,{key:0,size:"small",type:"success"},{default:e(()=>[r(u(a(d)("setting.mod.add.table.downloadedReady.ready")),1)]),_:1})):y("",!0),l.row.downloadedReady?y("",!0):(o(),f(z,{key:1},[l.row.file_url!==""?(o(),g(ae,{key:0,size:"small",type:"info"},{default:e(()=>[r(u(a(d)("setting.mod.add.table.downloadedReady.notUGC")),1)]),_:1})):(o(),g(ae,{key:1,size:"small",type:"warning"},{default:e(()=>[r(u(a(d)("setting.mod.add.table.downloadedReady.notReady")),1)]),_:1}))],64))]),_:1},8,["label"]),t(L,{label:a(d)("setting.mod.add.table.action")},{default:e(l=>[t(Ne,{trigger:"click",onCommand:Se},{dropdown:e(()=>[t(Ae,null,{default:e(()=>[t(ge,{command:{cmd:"enable",row:l.row}},{default:e(()=>[r(u(a(d)("setting.mod.add.table.enable")),1)]),_:2},1032,["command"]),t(ge,{command:{cmd:"delete",row:l.row}},{default:e(()=>[r(u(a(d)("setting.mod.add.table.delete")),1)]),_:2},1032,["command"])]),_:2},1024)]),default:e(()=>[t(k,{loading:I.value,link:"",type:"primary"},{default:e(()=>[r(u(a(d)("setting.mod.add.table.action"))+" ",1),t($e,{class:"el-icon--right"},{default:e(()=>[t(Oe)]),_:1})]),_:1},8,["loading"])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])]),_:1})),[[G,H.value]])]),_:1})]),_:1})]),_:1},8,["label"]),Q.value!=="darwin"?(o(),g(le,{key:0,label:a(d)("setting.mod.tab.setting"),name:"Setting"},{default:e(()=>[t(me,{gutter:10},{default:e(()=>[t(ne,{lg:8,md:8,sm:24,span:8,xs:24},{default:e(()=>[j((o(),g(q,{style:D(a(b)?"height: 50vh":"height: 70vh"),shadow:"never"},{default:e(()=>[t(te,{"max-height":a(b)?"45vh":"65vh"},{default:e(()=>[_.value?(o(!0),f(z,{key:0},K(_.value,(l,x)=>(o(),f(z,null,[l.id===1?(o(),f("div",st,[m("div",null,[t(fe,{src:a(Ie),fit:"fill",style:{width:"75px",height:"75px"},onClick:R=>O(l.id,l.file_url)},null,8,["src","onClick"])]),m("div",it,[t(k,{link:"",type:"primary",onClick:R=>O(l.id,l.file_url)},{default:e(()=>[r(u(a(d)("setting.mod.setting.right.clientModsDisabled")),1)]),_:2},1032,["onClick"]),m("div",null,[l.enable?(o(),g(M,{key:0,type:"success"},{default:e(()=>[r(u(a(d)("setting.mod.setting.left.enable")),1)]),_:1})):y("",!0),l.enable?y("",!0):(o(),g(M,{key:1,type:"info"},{default:e(()=>[r(u(a(d)("setting.mod.setting.left.disable")),1)]),_:1}))])])])):(o(),f("div",ut,[m("div",null,[t(fe,{src:l.preview_url,fit:"fill",style:{width:"75px",height:"75px"},onClick:R=>O(l.id,l.file_url)},null,8,["src","onClick"])]),m("div",rt,[t(k,{link:"",type:"primary",onClick:R=>O(l.id,l.file_url)},{default:e(()=>[r(u(l.name),1)]),_:2},1032,["onClick"]),m("div",null,[l.enable?(o(),g(M,{key:0,type:"success"},{default:e(()=>[r(u(a(d)("setting.mod.setting.left.enable")),1)]),_:1})):y("",!0),l.enable?y("",!0):(o(),g(M,{key:1,type:"info"},{default:e(()=>[r(u(a(d)("setting.mod.setting.left.disable")),1)]),_:1}))])])])),x!==_.value.length-1?(o(),g(Pe,{key:2})):y("",!0)],64))),256)):(o(),f("div",{key:1,style:D(a(b)?"height: 50vh":"height: 70vh"),class:"fcc"},[t(oe,{title:a(d)("setting.mod.setting.left.result"),icon:"warning"},null,8,["title"])],4))]),_:1},8,["max-height"])]),_:1},8,["style"])),[[G,X.value]])]),_:1}),t(ne,{lg:16,md:16,sm:24,span:16,xs:24},{default:e(()=>[j((o(),g(q,{style:D(a(b)?"height: 50vh; margin-top: 10px":"height: 70vh"),shadow:"never"},{header:e(()=>[m("div",ct,[m("span",null,u(a(d)("setting.mod.setting.right.header.title")),1),m("div",null,[t(k,{disabled:p.value<2,loading:Y.value,type:"primary",onClick:Fe},{default:e(()=>[r(u(a(d)("setting.mod.setting.right.header.update")),1)]),_:1},8,["disabled","loading"]),t(k,{disabled:p.value===0,loading:T.value,type:"danger",onClick:ze},{default:e(()=>[r(u(a(d)("setting.mod.setting.right.header.disable")),1)]),_:1},8,["disabled","loading"])])])]),default:e(()=>[p.value>1?(o(),g(te,{key:0,"max-height":a(b)?"37vh":"57vh"},{default:e(()=>[$.value.configOptions?(o(),g(re,{key:0,ref:"modSettingFormRef","label-position":a(b)?"top":"left","label-width":a(b)?"70":"auto",size:a(b)?"small":"large"},{default:e(()=>[t(P,{label:"ID"},{default:e(()=>[t(M,null,{default:e(()=>[r(u($.value.id),1)]),_:1})]),_:1}),t(P,{label:a(d)("setting.mod.setting.right.name")},{default:e(()=>[t(M,{type:"info"},{default:e(()=>[r(u(_.value[_.value.findIndex(l=>l.id===p.value)].name),1)]),_:1})]),_:1},8,["label"]),(o(!0),f(z,null,K($.value.configOptions,l=>(o(),g(ce,{content:l.hover,"show-after":500,effect:"light",placement:"top"},{default:e(()=>[t(P,{label:l.label},{default:e(()=>[t(S,{modelValue:_.value[_.value.findIndex(x=>x.id===p.value)].configurationOptions[l.name],"onUpdate:modelValue":x=>_.value[_.value.findIndex(R=>R.id===p.value)].configurationOptions[l.name]=x,onChange:be},{default:e(()=>[(o(!0),f(z,null,K(l.options,x=>(o(),g(h,{label:x.description,value:x.data},null,8,["label","value"]))),256))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"])]),_:2},1032,["content"]))),256))]),_:1},8,["label-position","label-width","size"])):(o(),f("div",{key:1,style:D(a(b)?"height: 40vh; margin-top: 10px":"height: 60vh"),class:"fcc"},[t(oe,{title:a(d)("setting.mod.setting.right.result"),icon:"info"},null,8,["title"])],4))]),_:1},8,["max-height"])):y("",!0),p.value===1?(o(),f("div",gt,[se.value==="zh"?(o(),f("div",mt,"如果启用此配置，则会禁用玩家的本地模组")):(o(),f("div",ft,"If enable this configuration option, the game server will Disable player's client mods"))])):y("",!0),p.value===0?(o(),f("div",{key:2,style:D(a(b)?"height: 40vh; margin-top: 10px":"height: 60vh"),class:"fcc"},[t(oe,{title:a(d)("setting.mod.setting.right.result2"),icon:"info"},null,8,["title"])],4)):y("",!0)]),_:1},8,["style"])),[[G,V.value]])]),_:1})]),_:1})]),_:1},8,["label"])):y("",!0)]),_:1},8,["modelValue"])])}}}),kt=Ge(vt,[["__scopeId","data-v-a82cc435"]]);export{kt as default};
