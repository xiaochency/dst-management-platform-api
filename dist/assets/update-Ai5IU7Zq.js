import{u as j,a as A,g as H,c as w,o as I,r as c,Z as V,B as n,d as f,e as h,f as s,w as i,p as z,j as a,i as l,t as e,m as x,n as S,X as F,A as O,y as X}from"./index-iCREqSRD.js";const Z={class:"page-div"},q={class:"card-header"},G={style:{"line-height":"50px"}},J={style:{"line-height":"50px"}},K={style:{"line-height":"50px"}},L={key:0},P={key:1},Q=F({name:"toolsUpdate"}),Y=Object.assign(Q,{setup(R){const{t}=j(),{isMobile:C}=A(),y=H(),E=w(()=>y.isDark);w(()=>y.language),I(()=>{B()});const _=c(!1),v=c(!1),d=c(""),m=c(!1),p=c(0),r=c(0),B=()=>{V.update.get().then(o=>{d.value=o.data.updateSetting.time,m.value=o.data.updateSetting.enable,p.value=o.data.version.local,r.value=o.data.version.server})},b=()=>{if(!d.value){O(t("tools.backup.timeChangeTip"));return}_.value=!0,v.value=!0;const o={time:d.value,enable:m.value};V.update.put(o).then(u=>{X(u.message)}).finally(()=>{_.value=!1,v.value=!1})};return(o,u)=>{const D=n("el-time-picker"),M=n("el-switch"),k=n("el-tag"),N=n("el-alert"),T=n("el-card"),U=n("el-col"),$=n("el-row");return f(),h("div",Z,[s($,{gutter:10},{default:i(()=>[s(U,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:i(()=>[s(T,{style:z(a(C)?"min-height: 500px":"min-height: 700px"),shadow:"never"},{header:i(()=>[l("div",q,e(a(t)("tools.update.title")),1)]),default:i(()=>[l("div",null,[l("div",G,[l("span",null,e(a(t)("tools.update.text1")),1),s(D,{modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=g=>d.value=g),clearable:!1,editable:!1,loading:_.value,style:{width:"120px",margin:"0 8px"},"value-format":"HH:mm:ss",onChange:b},null,8,["modelValue","loading"]),l("span",null,e(a(t)("tools.update.text2")),1)]),l("div",J,[l("span",null,e(a(t)("tools.update.text3")),1),s(M,{modelValue:m.value,"onUpdate:modelValue":u[1]||(u[1]=g=>m.value=g),"active-text":o.$t("tools.update.switchEnable"),"inactive-text":o.$t("tools.update.switchDisable"),loading:v.value,"inline-prompt":"",style:{margin:"0 8px","--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"},onChange:b},null,8,["modelValue","active-text","inactive-text","loading"]),l("span",null,e(a(t)("tools.update.text4")),1)]),l("div",K,[l("span",null,e(a(t)("tools.update.text5")),1),s(k,{type:p.value===r.value?"success":"warning",style:{margin:"0 8px"}},{default:i(()=>[x(e(p.value),1)]),_:1},8,["type"]),l("span",null,e(a(t)("tools.update.text6")),1),s(k,{style:{margin:"0 8px"},type:"primary"},{default:i(()=>[x(e(r.value),1)]),_:1}),p.value===r.value?(f(),h("span",L,e(a(t)("tools.update.text7")),1)):S("",!0),p.value!==r.value?(f(),h("span",P,e(a(t)("tools.update.text8")),1)):S("",!0)])]),s(N,{closable:!1,effect:E.value?"light":"dark",style:{"margin-top":"20px"},type:"warning"},{default:i(()=>[x(e(a(t)("tools.backup.alert")),1)]),_:1},8,["effect"])]),_:1},8,["style"])]),_:1})]),_:1})])}}});export{Y as default};
