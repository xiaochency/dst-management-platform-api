import{u as j,a as q,g as P,c as A,o as $,r as d,B as n,C as H,d as y,e as B,f as a,w as e,p as J,j as o,i as C,m as c,t as u,F as K,v as O,l as Q,k as W,s as X,A as Y,y as Z}from"./index-iCREqSRD.js";import{l as L}from"./index-CNLIsO_i.js";const ee={class:"page-div"},le={class:"card-header"},ae={class:"fcc"},se={__name:"clean",setup(te){const{t:r}=j(),{isMobile:S}=q(),k=P();A(()=>k.isDark);const x=A(()=>k.language);$(()=>{m()});const z=d([]),_=d(!1),m=()=>{_.value=!0,L.clean.status.get().then(s=>{z.value=s.data}).finally(()=>{_.value=!1})},g=["Ground","Cave","Chat","Access","Runtime"],i=d([]),M=s=>{const t=s.length;p.value=t===g.length,h.value=t>0&&t<g.length},p=d(!1),h=d(!1),D=s=>{i.value=s?g:[],h.value=!1},F={Ground:{zh:"地面日志",en:"Ground"},Cave:{zh:"洞穴日志",en:"Cave"},Chat:{zh:"聊天日志",en:"Chat"},Access:{zh:"请求日志",en:"Access"},Runtime:{zh:"运行日志",en:"Runtime"}},f=d(!1),G=()=>{if(i.value.length===0){Y(x.value==="zh"?"请至少选择一种日志":"Please select at least one type of log");return}f.value=!0;const s={logTypes:i.value};L.clean.clean.post(s).then(t=>{Z(t.message)}).finally(()=>{f.value=!1,m()})};return(s,t)=>{const w=n("el-checkbox"),V=n("el-button"),I=n("el-checkbox-group"),v=n("el-tag"),b=n("el-table-column"),R=n("el-table"),N=n("el-card"),T=n("el-col"),E=n("el-row"),U=H("loading");return y(),B("div",ee,[a(E,{gutter:10},{default:e(()=>[a(T,{lg:24,md:24,sm:24,span:24,xs:24,style:{"margin-top":"10px"}},{default:e(()=>[a(N,{style:J(o(S)?"min-height: 500px":"min-height: 700px"),shadow:"never"},{header:e(()=>[C("div",le,[c(u(o(r)("logs.clean.title"))+" ",1),C("div",ae,[a(w,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=l=>p.value=l),indeterminate:h.value,size:"large",style:{"margin-right":"10px"},onChange:D},{default:e(()=>[c(u(o(r)("logs.clean.selectAll")),1)]),_:1},8,["modelValue","indeterminate"]),a(V,{onClick:m},{default:e(()=>[c(u(o(r)("logs.clean.refresh")),1)]),_:1}),a(V,{loading:f.value,type:"danger",onClick:G},{default:e(()=>[c(u(o(r)("logs.clean.button")),1)]),_:1},8,["loading"])])])]),default:e(()=>[C("div",null,[a(I,{modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=l=>i.value=l),onChange:M},{default:e(()=>[(y(),B(K,null,O(g,l=>a(w,{key:l,label:l,value:l},{default:e(()=>[c(u(F[l][x.value==="zh"?"zh":"en"]),1)]),_:2},1032,["label","value"])),64))]),_:1},8,["modelValue"]),Q((y(),W(R,{ref:"tableRef",data:z.value,border:"",style:{"margin-top":"20px"}},{default:e(()=>[a(b,{label:o(r)("logs.clean.type"),prop:"name"},{default:e(l=>[a(v,{type:"primary"},{default:e(()=>[c(u(l.row.name),1)]),_:2},1024)]),_:1},8,["label"]),a(b,{label:o(r)("logs.clean.size"),prop:"size"},{default:e(l=>[a(v,{type:"success"},{default:e(()=>[c(u(o(X)(l.row.size)),1)]),_:2},1024)]),_:1},8,["label"]),a(b,{label:o(r)("logs.clean.num"),prop:"num"},{default:e(l=>[a(v,{type:"info"},{default:e(()=>[c(u(l.row.num),1)]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data"])),[[U,_.value]])])]),_:1},8,["style"])]),_:1})]),_:1})])}}};export{se as default};
